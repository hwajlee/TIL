## 정규화 (Normalization)
--- 
- 데이터를 중복으로 저장하면 일관되지 않은 데이터, 비정상적인 삽입/갱신/삭제, 디스크 공간 낭비 등 많은 문제를 일으킴
- 정규화는 **중복 데이터를 저장하면서 일으키는 문제점을 없애려고 정보룰 주제별로 분할하는 프로그램**을 의미
- 기복목표 - **테이블 간에 중복된 데이터를 허용하지 않는다는 것**
  - 중복된 데이털르 허용하지 않음으로써 무결성(Intergrity)를 유지할 수 있으며, DB의 저장 용량 역시 줄일 수 o

<br>

### 정규화의 종류
- 1NF
- 2NF
- 3NF
- BCNF (Boyce-Codd Normal Form)
- 4NF
- 5NF
- 6NF

<br>

### 제 1정규화 
- 테이블의 컬럼이 **원자값(Atomic Value, 하나의 값)을 갖도록 테이블을 분해**하는 것 

- 예시 테이블) 고객취미들(이름, 취미들)

|이름       | 취미들                   |
|-----------|-------------------------|
|김연아     |인터넷                    |
|추신수     |영화, 음악                |
|박세리     |음악, 쇼핑                |
|장미란     |음악                      |
|박지성     |게임                      |

    - '추신수'와 '박세리'는 여러 개의 취미를 가지고 있으므로 제 1정규형을 만족하지 못함 
    - 따라서 이를 제 1정규화하여 분해 가능 
    - 한 컬럼에는 하나의 값만 들어가도록 테이블 분해 

- 분해 후 테이블) 고객취미(이름, 취미)

|이름       | 취미들                   |
|-----------|-------------------------|
|김연아     |인터넷                    |
|추신수     |영화                      |
|추신수     |음악                      |
|박세리     |음악                      |
|박세리     |쇼핑                      |
|장미란     |음악                      |
|박지성     |게임                      |

<br>

### 제 2정규화 
- 제 1정규화를 진행한 테이블에 대해 **완전 함수 종속**을 만족하도록 테이블을 분해하는 것 
- 완전 함수 종속이란 것은 기본 키의 부분집합이 결정자가 되어선 안된다는 것을 의미 
  
- 예시 테이블) 수강강좌 
  
|학생번호     |강좌이름           |강의실          |성적     |
|------------|-------------------|---------------|----------|
|501         |데이터베이스        |공학관 110     |3.5       |
|401         |데이터베이스        |공학관 110     |4.0       |
|402         |스포츠경영학        |체육관 103     |3.5       |
|502         |자료구조            |공학관 111     |4.0       |
|501         |자료구조            |공학관 111     |3.5       |

- (학생번호) -> 성적 
- (강좌이름) -> 강의실

<br> 

    - 이 테이블에서 **기본키는 (학생번호, 강좌이름)으로 복합키**
    - 그리고 (학생번호, 강좌이름)인 기본키는 강의실을 결정하고 있음 (학생번호, 강좌이름) --> 강의실 
    - 그런데 강의실이라는 컬럼은 기본키의 부분집합인 강좌이름에 의해 결정될 수 있음 (강좌이름) --> 강의실 
    - 따라서 기존의 테이블에서 강의실을 분해하여 별도의 테이블로 관리하여 제 2정규형 만족시킬 수 있음 

- 분해 후 테이블1) 수강 테이블 
  
| 학생번호 | 강좌이름       | 성적     |
|---------|----------------|----------|
|501      |데이터베이스     |3.5       |
|401      |데이터베이스     |4.0       |
|402      |스포츠경영학     |3.5       |
|502      |자료구조         |4.0       |
|501      |자료구조         |3.5       |

- 테이블2) 강의실

|강좌이름    | 강의실      |
|-----------|-------------|
|데이터베이스|공학관 110   |
|스포츠경영학|체육관 103   |
|자료구조    |공학관 111   |

- (학생번호, 강좌이름) -> 성적
- (강좌이름) -> 강의실 

<br>

### 제 3정규화 
- 제 2정규화를 진행한 테이블에 대해 **이행적 종속**을 없애도록 테이블을 분해하는 것 
- 이행적 종속이라는 것은 A -> B, A -> C가 성립할 때 A -> C가 성립되는 것을 의미 
- 예시 테이블) 계절학기

|학생번호   |강좌이름          |수강료    |
|----------|------------------|---------|
|501       |데이터베이스       |20,000   |
|401       |데이터베이스       |20,000   |
|402       |스포츠경영학       |15,000   |
|502       |자료구조           |25,000   |

- 학생번호 -> 강좌이름 -> 수강료 
  
<br>

    - 기존의 테이블에서 학생 번호는 강좌이름을 결정하고 있고, 강좌 이름은 수강료를 결정하고 있음
    - 그렇기 때문에 이를 (학생번호, 강좌이름) 테이블과 (강좌이름, 수강료) 테이블로 분해해야 함 
    - 이행적 종속을 제거하는 이유는 다음과 같음 
    - 예를 들어 501번 학생이 수강하는 강좌가 스포츠경영학으로 변경되었다고 할 때, 이행적 종속이 존재한다면   501번의 학생은 스포츠경영학이라는 수업을 20,000원이라는 수강료로 듣게 됨. 물론 강좌 이름에 맞게 수강료를 변경할 수 잇지만, 이러한 번거로움을 해결하기 위해 제 3정규화를 하는 것 

- 변경 후 테이블1) 계절수강 

|학생번호    |강좌이름      |
|-----------|--------------|
|501        |데이터베이스   |
|401        |데이터베이스   |
|402        |스포츠경영학   |
|502        |자료구조       |

- 테이블2) 수강료 

|강좌이름    |수강료      |
|-----------|------------|
|데이터베이스|20,000      |
|스포츠경영학|15,000      |
|자료구조    |25,000     |

- 학생번호 -> 강좌이름
- 강좌이름 -> 수강료 

<br>

--- 
#### 참고자료 
@ https://velog.io/@majaeh43/SQL-normalization%EC%A0%95%EA%B7%9C%ED%99%94%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80#sql-normalization%EC%A0%95%EA%B7%9C%ED%99%94%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80-%EC%99%9C-%EC%93%B0%EB%8A%94%EA%B0%80

